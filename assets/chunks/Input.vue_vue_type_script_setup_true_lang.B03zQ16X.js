import{d as j,a9 as D,p as c,L as O,h as $,q as U,$ as q,o as s,c as n,F as E,r as f,e as u,j as F,a2 as K,aa as L,K as S,k as z,b as h,Z,ab as G,n as H,P as J}from"./framework.E6HiUgoA.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang.1aYMtfo9.js";const le=Symbol("formContextKey"),Q=Symbol("formItemContextKey"),W={key:0,class:"vb-input__prepend"},X={class:"vb-input__wrapper"},Y={key:0,class:"vb-input__prefix"},x=["type","disabled","readonly","autocomplete","placeholder","autofocus","form"],ee={key:1,class:"vb-input__append"},ae=["disabled","readonly","autocomplete","placeholder","autofocus","form"],te=j({name:"TSV3-input",inheritAttrs:!1,__name:"Input",props:{type:{default:"text"},modelValue:{},size:{},disabled:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},placeholder:{},readonly:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},form:{}},emits:["update:modelValue","input","change","focus","blur","clear"],setup(M,{expose:A,emit:I}){const r=M,o=I,w=D(),a=c(r.modelValue),v=c(!1),i=c(!1),d=c(),l=O(Q),m=e=>{l==null||l.validate(e).catch(p=>console.log(p.errors))},V=$(()=>r.clearable&&!r.disabled&&!!a.value&&v.value),y=$(()=>r.showPassword&&!r.disabled&&!!a.value),_=()=>{i.value=!i.value},N=()=>{},R=async()=>{var e;await J(),(e=d.value)==null||e.focus()},g=()=>{o("update:modelValue",a.value),o("input",a.value),l&&m("input")},B=()=>{o("change",a.value),l&&m("change")},C=e=>{v.value=!0,o("focus",e),l==null||l.clearValidate()},P=e=>{v.value=!1,o("blur",e),l&&m("blur")},T=()=>{a.value="",o("update:modelValue",""),o("clear"),o("input",""),o("change","")};U(()=>r.modelValue,e=>{a.value=e}),A({ref:d});const t=q();return(e,p)=>(s(),n("div",{class:H(["vb-input",{[`vb-input--${e.type}`]:e.type,[`vb-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":t.prepend,"is-append":t.append,"is-suffix":t.suffix,"is-prefix":t.prefix}])},[e.type!=="textarea"?(s(),n(E,{key:0},[t.prepend?(s(),n("div",W,[f(e.$slots,"prepend")])):u("",!0),F("div",X,[t.prefix?(s(),n("span",Y,[f(e.$slots,"prefix")])):u("",!0),K(F("input",S({class:"vb-input__inner",type:e.showPassword?i.value?"text":"password":e.type,ref_key:"inputRef",ref:d},z(w),{disabled:e.disabled,readonly:e.readonly,autocomplete:e.autocomplete,placeholder:e.placeholder,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":p[0]||(p[0]=b=>a.value=b),onInput:g,onChange:B,onFocus:C,onBlur:P}),null,16,x),[[L,a.value]]),t.suffix||V.value||y.value?(s(),n("span",{key:1,class:"vb-input__suffix",onClick:R},[f(e.$slots,"suffix"),V.value?(s(),h(k,{key:0,icon:"circle-xmark",class:"vb-input__clear",onClick:T,onMousedown:Z(N,["prevent"])})):u("",!0),y.value&&i.value?(s(),h(k,{key:1,icon:"eye",class:"vb-input__password",onClick:_})):u("",!0),y.value&&!i.value?(s(),h(k,{key:2,icon:"eye-slash",class:"vb-input__password",onClick:_})):u("",!0)])):u("",!0)]),t.append?(s(),n("div",ee,[f(e.$slots,"append")])):u("",!0)],64)):K((s(),n("textarea",S({key:1,class:"vb-textarea__wrapper"},z(w),{ref_key:"inputRef",ref:d,disabled:e.disabled,readonly:e.readonly,autocomplete:e.autocomplete,placeholder:e.placeholder,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":p[1]||(p[1]=b=>a.value=b),onInput:g,onChange:B,onFocus:C,onBlur:P}),null,16,ae)),[[G,a.value]])],2))}});export{te as _,Q as a,le as f};
